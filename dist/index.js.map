{"version":3,"sources":["../src/actions/token-search-address.ts","../src/birdeye.ts","../src/constants.ts","../src/utils.ts","../src/actions/token-search-symbol.ts","../src/actions/wallet-search-address.ts","../src/providers/agent-portfolio-provider.ts","../src/index.ts"],"sourcesContent":["import {\n    type Action,\n    type ActionExample,\n    elizaLogger,\n    formatTimestamp,\n    type HandlerCallback,\n    type IAgentRuntime,\n    type Memory,\n    type State,\n} from \"@elizaos/core\";\nimport { BirdeyeProvider } from \"../birdeye\";\nimport type {\n    TokenMarketDataResponse,\n    TokenOverviewResponse,\n    TokenSecurityResponse,\n    TokenTradeDataSingleResponse,\n} from \"../types/api/token\";\nimport type { BaseAddress } from \"../types/shared\";\nimport {\n    extractAddresses,\n    formatPercentChange,\n    formatPrice,\n    formatValue,\n    shortenAddress,\n} from \"../utils\";\n\ntype TokenAddressSearchResult = {\n    overview: TokenOverviewResponse;\n    tradeData: TokenTradeDataSingleResponse;\n    security: TokenSecurityResponse;\n    marketData: TokenMarketDataResponse;\n};\n\nexport const tokenSearchAddressAction = {\n    name: \"TOKEN_SEARCH_ADDRESS\",\n    similes: [\n        \"SEARCH_TOKEN_ADDRESS\",\n        \"FIND_TOKEN_ADDRESS\",\n        \"LOOKUP_TOKEN_ADDRESS\",\n        \"CHECK_TOKEN_ADDRESS\",\n        \"GET_TOKEN_BY_ADDRESS\",\n        \"TOKEN_ADDRESS_INFO\",\n        \"TOKEN_ADDRESS_LOOKUP\",\n        \"TOKEN_ADDRESS_SEARCH\",\n        \"TOKEN_ADDRESS_CHECK\",\n        \"TOKEN_ADDRESS_DETAILS\",\n        \"TOKEN_CONTRACT_SEARCH\",\n        \"TOKEN_CONTRACT_LOOKUP\",\n        \"TOKEN_CONTRACT_INFO\",\n        \"TOKEN_CONTRACT_CHECK\",\n        \"VERIFY_TOKEN_ADDRESS\",\n        \"VALIDATE_TOKEN_ADDRESS\",\n        \"GET_TOKEN_INFO\",\n        \"TOKEN_INFO\",\n        \"TOKEN_REPORT\",\n        \"TOKEN_ANALYSIS\",\n        \"TOKEN_OVERVIEW\",\n        \"TOKEN_SUMMARY\",\n        \"TOKEN_INSIGHT\",\n        \"TOKEN_DATA\",\n        \"TOKEN_STATS\",\n        \"TOKEN_METRICS\",\n        \"TOKEN_PROFILE\",\n        \"TOKEN_REVIEW\",\n        \"TOKEN_CHECK\",\n        \"TOKEN_LOOKUP\",\n        \"TOKEN_FIND\",\n        \"TOKEN_DISCOVER\",\n        \"TOKEN_EXPLORE\",\n    ],\n    description:\n        \"Search for detailed token information including security and trade data by address\",\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        _state: State,\n        _options: Record<string, unknown>,\n        callback?: HandlerCallback\n    ) => {\n        try {\n            const provider = new BirdeyeProvider(runtime.cacheManager);\n\n            // get all contract addresses from the message\n            const addresses = extractAddresses(message.content.text);\n\n            elizaLogger.info(\n                `Searching Birdeye provider for ${addresses.length} addresses`\n            );\n\n            // for each symbol, do a search in Birdeye. This will return a list of token results that may be amatch to the token symbol.\n            const results: TokenAddressSearchResult[] = await Promise.all(\n                addresses.map(async ({ address, chain: addressChain }) => {\n                    // address detection can't distinguish between evm chains, so we currently only do address search on ETH for EVM addresses. Future support will be added for other chains if the user requests it.\n                    const chain =\n                        addressChain === \"evm\" ? \"ethereum\" : addressChain;\n\n                    const [overview, marketData, security, tradeData] =\n                        await Promise.all([\n                            provider.fetchTokenOverview(\n                                {\n                                    address,\n                                },\n                                {\n                                    headers: {\n                                        \"x-chain\": chain,\n                                    },\n                                }\n                            ),\n                            provider.fetchTokenMarketData(\n                                {\n                                    address,\n                                },\n                                {\n                                    headers: {\n                                        \"x-chain\": chain,\n                                    },\n                                }\n                            ),\n                            provider.fetchTokenSecurityByAddress(\n                                {\n                                    address,\n                                },\n                                {\n                                    headers: {\n                                        \"x-chain\": chain,\n                                    },\n                                }\n                            ),\n                            provider.fetchTokenTradeDataSingle(\n                                {\n                                    address,\n                                },\n                                {\n                                    headers: {\n                                        \"x-chain\": chain,\n                                    },\n                                }\n                            ),\n                        ]);\n\n                    return {\n                        overview,\n                        marketData,\n                        security,\n                        tradeData,\n                    };\n                })\n            );\n\n            console.log(results);\n\n            const completeResults = `I performed a search for the token addresses you requested and found the following results:\\n\\n${results\n                .map(\n                    (result, i) =>\n                        `${formatTokenReport(addresses[i], i, result)}`\n                )\n                .join(\"\\n\\n\")}`;\n\n            callback?.({ text: completeResults });\n            return true;\n        } catch (error) {\n            console.error(\"Error in searchTokens handler:\", error.message);\n            callback?.({ text: `Error: ${error.message}` });\n            return false;\n        }\n    },\n    validate: async (_runtime: IAgentRuntime, message: Memory) => {\n        const addresses = extractAddresses(message.content.text);\n        return addresses.length > 0;\n    },\n    examples: [\n        [\n            {\n                user: \"user\",\n                content: {\n                    text: \"Search for 0x7fc66500c84a76ad7e9c93437bfc5ac33e2ddae9\",\n                    action: \"TOKEN_SEARCH_ADDRESS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Look up contract So11111111111111111111111111111111111111112\",\n                    action: \"TOKEN_ADDRESS_LOOKUP\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Check this address: 0x1f9840a85d5af5bf1d1762f925bdaddc4201f984\",\n                    action: \"CHECK_TOKEN_ADDRESS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Get info for 0x2260fac5e5542a773aa44fbcfedf7c193bc2c599\",\n                    action: \"TOKEN_ADDRESS_INFO\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Analyze contract 0x514910771af9ca656af840dff83e8264ecf986ca\",\n                    action: \"TOKEN_CONTRACT_SEARCH\",\n                },\n            },\n        ],\n    ] as ActionExample[][],\n} as Action;\n\n// take all the details of the results and present to the user\nconst formatTokenReport = (\n    address: BaseAddress,\n    _index: number,\n    result: TokenAddressSearchResult\n) => {\n    let output = \"\";\n\n    if (result.overview?.data) {\n        output += \"\\n\";\n        output += \"Token Overview:\\n\";\n        output += `üìù Name: ${result.overview.data.name}\\n`;\n        output += result.overview.data.symbol\n            ? `üîñ Symbol: ${result.overview.data.symbol.toUpperCase()}\\n`\n            : \"\";\n        output += `üîó Address: ${address.address}\\n`;\n        output += `üî¢ Decimals: ${result.overview.data.decimals}\\n`;\n        output += \"\";\n        if (result.overview.data.extensions) {\n            const ext = result.overview.data.extensions;\n            output += \"üîó Links & Info:\\n\";\n            if (ext.website) output += `   ‚Ä¢ Website: ${ext.website}\\n`;\n            if (ext.twitter) output += `   ‚Ä¢ Twitter: ${ext.twitter}\\n`;\n            if (ext.telegram) output += `   ‚Ä¢ Telegram: ${ext.telegram}\\n`;\n            if (ext.discord) output += `   ‚Ä¢ Discord: ${ext.discord}\\n`;\n            if (ext.medium) output += `   ‚Ä¢ Medium: ${ext.medium}\\n`;\n            if (ext.coingeckoId)\n                output += `   ‚Ä¢ CoinGecko ID: ${ext.coingeckoId}\\n`;\n            if (ext.serumV3Usdc)\n                output += `   ‚Ä¢ Serum V3 USDC: ${ext.serumV3Usdc}\\n`;\n            if (ext.serumV3Usdt)\n                output += `   ‚Ä¢ Serum V3 USDT: ${ext.serumV3Usdt}\\n`;\n        }\n        output += `üíß Liquidity: ${formatValue(result.overview.data.liquidity)}\\n`;\n        output += `‚è∞ Last Trade Time: ${formatTimestamp(new Date(result.overview.data.lastTradeHumanTime).getTime() / 1000)}\\n`;\n        output += `üíµ Price: ${formatPrice(result.overview.data.price)}\\n`;\n        output += `üìú Description: ${result.overview.data.extensions?.description ?? \"N/A\"}\\n`;\n    }\n\n    if (result.marketData?.data) {\n        output += \"\\n\";\n        output += \"Market Data:\\n\";\n        output += `üíß Liquidity: ${formatValue(result.marketData.data.liquidity)}\\n`;\n        output += `üíµ Price: ${formatPrice(result.marketData.data.price)}\\n`;\n        output += `üì¶ Supply: ${formatValue(result.marketData.data.supply)}\\n`;\n        output += `üí∞ Market Cap: ${formatValue(result.marketData.data.marketcap)}\\n`;\n        output += `üîÑ Circulating Supply: ${formatValue(result.marketData.data.circulating_supply)}\\n`;\n        output += `üí∞ Circulating Market Cap: ${formatValue(result.marketData.data.circulating_marketcap)}\\n`;\n    }\n\n    if (result.tradeData?.data) {\n        output += \"\\n\";\n        output += \"Trade Data:\\n\";\n        output += `üë• Holders: ${result.tradeData.data.holder}\\n`;\n        output += `üìä Unique Wallets (24h): ${result.tradeData.data.unique_wallet_24h}\\n`;\n        output += `üìâ Price Change (24h): ${formatPercentChange(result.tradeData.data.price_change_24h_percent)}\\n`;\n        output += `üí∏ Volume (24h USD): ${formatValue(result.tradeData.data.volume_24h_usd)}\\n`;\n        output += `üíµ Current Price: $${formatPrice(result.tradeData.data.price)}\\n`;\n    }\n\n    if (result.security?.data) {\n        output += \"\\n\";\n        output += \"Ownership Distribution:\\n\";\n        output += `üè† Owner Address: ${shortenAddress(result.security.data.ownerAddress)}\\n`;\n        output += `üë®‚Äçüíº Creator Address: ${shortenAddress(result.security.data.creatorAddress)}\\n`;\n        output += `üì¶ Total Supply: ${formatValue(result.security.data.totalSupply)}\\n`;\n        output += result.security.data.proxied\n            ? `üåø Mintable: ${result.security.data.mintable ?? \"N/A\"}\\n`\n            : \"\";\n        output += result.security.data.proxy\n            ? `üîÑ Proxied: ${result.security.data.proxy ?? \"N/A\"}\\n`\n            : \"\";\n        output += result.security.data.securityChecks\n            ? `üîç Security Checks: ${JSON.stringify(result.security.data.securityChecks)}\\n`\n            : \"\";\n    }\n\n    return output ?? `No results found for ${address.address}`;\n};\n","import { elizaLogger, type ICacheManager, settings } from \"@elizaos/core\";\nimport NodeCache from \"node-cache\";\nimport * as path from \"node:path\";\nimport {\n    API_BASE_URL,\n    BIRDEYE_ENDPOINTS,\n    DEFAULT_MAX_RETRIES,\n    DEFAULT_SUPPORTED_SYMBOLS,\n    RETRY_DELAY_MS,\n} from \"./constants\";\nimport type { BirdeyeApiParams, BirdeyeApiResponse } from \"./types/api/common\";\nimport type {\n    BaseQuoteParams,\n    BaseQuoteResponse,\n    DefiHistoryPriceParams,\n    DefiHistoryPriceResponse,\n    DefiMultiPriceParams,\n    DefiMultiPriceParamsPOST,\n    DefiMultiPriceResponse,\n    DefiNetworksResponse,\n    DefiPriceParams,\n    DefiPriceResponse,\n    DefiTradesTokenParams,\n    DefiTradesTokenResponse,\n    HistoricalPriceUnixParams,\n    HistoricalPriceUnixResponse,\n    MultiPriceVolumeParams,\n    MultiPriceVolumeResponse,\n    OHLCVParams,\n    OHLCVResponse,\n    PriceVolumeParams,\n    PriceVolumeResponse,\n} from \"./types/api/defi\";\nimport type {\n    OHLCVPairParams,\n    OHLCVPairResponse,\n    PairOverviewMultiParams,\n    PairOverviewMultiResponse,\n    PairOverviewSingleParams,\n    PairOverviewSingleResponse,\n} from \"./types/api/pair\";\nimport type {\n    TokenMarketSearchParams,\n    TokenMarketSearchResponse,\n} from \"./types/api/search\";\nimport type {\n    AllMarketsParams,\n    AllMarketsResponse,\n    MintBurnParams,\n    MintBurnResponse,\n    NewListingParams,\n    NewListingResponse,\n    TokenCreationInfoParams,\n    TokenCreationInfoResponse,\n    TokenHoldersParams,\n    TokenHoldersResponse,\n    TokenListParams,\n    TokenListResponse,\n    TokenListV2Response,\n    TokenMarketDataParams,\n    TokenMarketDataResponse,\n    TokenMetadataMultiParams,\n    TokenMetadataMultiResponse,\n    TokenMetadataSingleParams,\n    TokenMetadataSingleResponse,\n    TokenOverviewParams,\n    TokenOverviewResponse,\n    TokenSecurityParams,\n    TokenSecurityResponse,\n    TokenTradeDataMultiParams,\n    TokenTradeDataMultiResponse,\n    TokenTradeDataSingleParams,\n    TokenTradeDataSingleResponse,\n    TokenTrendingParams,\n    TokenTrendingResponse,\n    TopTradersParams,\n    TopTradersResponse,\n} from \"./types/api/token\";\nimport type {\n    GainersLosersParams,\n    GainersLosersResponse,\n    TraderTransactionsSeekParams,\n    TraderTransactionsSeekResponse,\n} from \"./types/api/trader\";\nimport type {\n    WalletPortfolioMultichainParams,\n    WalletPortfolioMultichainResponse,\n    WalletPortfolioParams,\n    WalletPortfolioResponse,\n    WalletSimulationParams,\n    WalletSimulationResponse,\n    WalletTokenBalanceParams,\n    WalletTokenBalanceResponse,\n    WalletTransactionHistoryMultichainParams,\n    WalletTransactionHistoryMultichainResponse,\n    WalletTransactionHistoryParams,\n    WalletTransactionHistoryResponse,\n} from \"./types/api/wallet\";\nimport { convertToStringParams, waitFor } from \"./utils\";\n\ntype FetchParams<T> = T & {\n    headers?: Record<string, string>;\n};\n\nclass BaseCachedProvider {\n    private cache: NodeCache;\n\n    constructor(\n        private cacheManager: ICacheManager,\n        private cacheKey,\n        ttl?: number\n    ) {\n        this.cache = new NodeCache({ stdTTL: ttl || 300 });\n    }\n\n    private readFsCache<T>(key: string): Promise<T | null> {\n        return this.cacheManager.get<T>(path.join(this.cacheKey, key));\n    }\n\n    private writeFsCache<T>(key: string, data: T): Promise<void> {\n        return this.cacheManager.set(path.join(this.cacheKey, key), data, {\n            expires: Date.now() + 5 * 60 * 1000,\n        });\n    }\n\n    public async readFromCache<T>(key: string): Promise<T | null> {\n        // get memory cache first\n        const val = this.cache.get<T>(key);\n        if (val) {\n            return val;\n        }\n\n        const fsVal = await this.readFsCache<T>(key);\n        if (fsVal) {\n            // set to memory cache\n            this.cache.set(key, fsVal);\n        }\n\n        return fsVal;\n    }\n\n    public async writeToCache<T>(key: string, val: T): Promise<void> {\n        // Set in-memory cache\n        this.cache.set(key, val);\n\n        // Write to file-based cache\n        await this.writeFsCache(key, val);\n    }\n}\n\nexport class BirdeyeProvider extends BaseCachedProvider {\n    private symbolMap: Record<string, string>;\n    private maxRetries: number;\n\n    constructor(\n        cacheManager: ICacheManager,\n        symbolMap?: Record<string, string>,\n        maxRetries?: number\n    ) {\n        super(cacheManager, \"birdeye/data\");\n        this.symbolMap = symbolMap || DEFAULT_SUPPORTED_SYMBOLS;\n        this.maxRetries = maxRetries || DEFAULT_MAX_RETRIES;\n    }\n\n    /*\n     * COMMON FETCH FUNCTIONS\n     */\n    private async fetchWithRetry<T extends BirdeyeApiResponse>(\n        url: string,\n        options: RequestInit = {}\n    ): Promise<T> {\n        let attempts = 0;\n\n        // allow the user to override the chain\n        const chain =\n            options.headers?.[\"x-chain\"] || settings.BIRDEYE_CHAIN || \"solana\";\n\n        while (attempts < this.maxRetries) {\n            attempts++;\n            try {\n                const resp = await fetch(url, {\n                    ...options,\n                    headers: {\n                        Accept: \"application/json\",\n                        \"Content-Type\": \"application/json\",\n                        \"x-chain\": chain,\n                        \"X-API-KEY\": settings.BIRDEYE_API_KEY || \"\",\n                        ...options.headers,\n                    },\n                });\n\n                if (!resp.ok) {\n                    const errorText = await resp.text();\n                    throw new Error(\n                        `HTTP error! status: ${resp.status}, message: ${errorText}`\n                    );\n                }\n\n                const rawData = await resp.json();\n                // If the response already has data and success fields, return it\n                if (\n                    rawData.data !== undefined &&\n                    rawData.success !== undefined\n                ) {\n                    return rawData as T;\n                }\n                // Otherwise wrap the response in the expected format\n                return {\n                    data: rawData,\n                    success: true,\n                } as T;\n            } catch (error) {\n                if (attempts === this.maxRetries) {\n                    // failed after all\n                    throw error;\n                }\n                await waitFor(RETRY_DELAY_MS);\n            }\n        }\n    }\n\n    private async fetchWithCacheAndRetry<T extends BirdeyeApiResponse>({\n        url,\n        params,\n        headers,\n        method = \"GET\",\n    }: {\n        url: string;\n        params?: BirdeyeApiParams;\n        headers?: Record<string, string>;\n        method?: \"GET\" | \"POST\";\n    }): Promise<T> {\n        const stringParams = convertToStringParams(params);\n        const fullUrl = `${API_BASE_URL}${url}`;\n        const cacheKey =\n            method === \"GET\"\n                ? `${url}?${new URLSearchParams(stringParams)}`\n                : `${url}:${JSON.stringify(params)}`;\n\n        const val = await this.readFromCache(cacheKey);\n        if (val) return val as T;\n\n        const urlWithParams =\n            method === \"GET\" && params\n                ? `${fullUrl}?${new URLSearchParams(stringParams)}`\n                : fullUrl;\n\n        elizaLogger.info(`Birdeye fetch: ${urlWithParams}`);\n\n        const data = await this.fetchWithRetry<T>(urlWithParams, {\n            method,\n            headers,\n            ...(method === \"POST\" &&\n                params && { body: JSON.stringify(params) }),\n        });\n\n        await this.writeToCache(cacheKey, data);\n        return data as T;\n    }\n\n    /*\n     * DEFI FETCH FUNCTIONS\n     */\n\n    // Get a list of all supported networks.\n    public async fetchDefiSupportedNetworks() {\n        return this.fetchWithCacheAndRetry<DefiNetworksResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.networks,\n        });\n    }\n\n    // Get price update of a token.\n    public async fetchDefiPrice(\n        params: DefiPriceParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiPriceResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.price,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get price updates of multiple tokens in a single API call. Maximum 100 tokens\n    public async fetchDefiPriceMultiple(\n        params: DefiMultiPriceParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiMultiPriceResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.price_multi,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get price updates of multiple tokens in a single API call. Maximum 100 tokens\n    public async fetchDefiPriceMultiple_POST(\n        params: DefiMultiPriceParamsPOST,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiMultiPriceResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.price_multi_POST,\n            params,\n            headers: options.headers,\n            method: \"POST\",\n        });\n    }\n\n    // Get historical price line chart of a token.\n    public async fetchDefiPriceHistorical(\n        params: DefiHistoryPriceParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiHistoryPriceResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.history_price,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get historical price by unix timestamp\n    public async fetchDefiPriceHistoricalByUnixTime(\n        params: HistoricalPriceUnixParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<HistoricalPriceUnixResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.historical_price_unix,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get list of trades of a certain token.\n    public async fetchDefiTradesToken(\n        params: DefiTradesTokenParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiTradesTokenResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.trades_token,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get list of trades of a certain pair or market.\n    public async fetchDefiTradesPair(\n        params: DefiTradesTokenParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiTradesTokenResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.trades_token,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get list of trades of a token with time bound option.\n    public async fetchDefiTradesTokenSeekByTime(\n        params: DefiTradesTokenParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiTradesTokenResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.trades_token_seek,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get list of trades of a certain pair or market with time bound option.\n    public async fetchDefiTradesPairSeekByTime(\n        params: DefiTradesTokenParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiTradesTokenResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.trades_pair_seek,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get OHLCV price of a token.\n    public async fetchDefiOHLCV(\n        params: OHLCVParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<OHLCVResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.ohlcv,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get OHLCV price of a pair.\n    public async fetchDefiOHLCVPair(\n        params: OHLCVPairParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<OHLCVPairResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.ohlcv_pair,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get OHLCV price of a base-quote pair.\n    public async fetchDefiOHLCVBaseQuote(\n        params: BaseQuoteParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<BaseQuoteResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.ohlcv_base_quote,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get price and volume of a token.\n    public async fetchDefiPriceVolume(\n        params: PriceVolumeParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<PriceVolumeResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.price_volume,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get price and volume updates of maximum 50 tokens\n    public async fetchDefiPriceVolumeMulti_POST(\n        params: MultiPriceVolumeParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<MultiPriceVolumeResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.price_volume_multi_POST,\n            params,\n            headers: options.headers,\n            method: \"POST\",\n        });\n    }\n\n    /*\n     * TOKEN FETCH FUNCTIONS\n     */\n\n    // Get token list of any supported chains.\n    public async fetchTokenList(\n        params: TokenListParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenListResponse>({\n            url: BIRDEYE_ENDPOINTS.token.list_all,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get token security of any supported chains.\n    public async fetchTokenSecurityByAddress(\n        params: TokenSecurityParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenSecurityResponse>({\n            url: BIRDEYE_ENDPOINTS.token.security,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get overview of a token.\n    public async fetchTokenOverview(\n        params: TokenOverviewParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenOverviewResponse>({\n            url: BIRDEYE_ENDPOINTS.token.overview,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get creation info of token\n    public async fetchTokenCreationInfo(\n        params: TokenCreationInfoParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenCreationInfoResponse>({\n            url: BIRDEYE_ENDPOINTS.token.creation_info,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Retrieve a dynamic and up-to-date list of trending tokens based on specified sorting criteria.\n    public async fetchTokenTrending(\n        params?: TokenTrendingParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenTrendingResponse>({\n            url: BIRDEYE_ENDPOINTS.token.trending,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // This endpoint facilitates the retrieval of a list of tokens on a specified blockchain network. This upgraded version is exclusive to business and enterprise packages. By simply including the header for the requested blockchain without any query parameters, business and enterprise users can get the full list of tokens on the specified blockchain in the URL returned in the response. This removes the need for the limit response of the previous version and reduces the workload of making multiple calls.\n    public async fetchTokenListV2_POST(\n        params: FetchParams<Record<string, never>>\n    ) {\n        return this.fetchWithCacheAndRetry<TokenListV2Response>({\n            url: BIRDEYE_ENDPOINTS.token.list_all_v2_POST,\n            params,\n            headers: params.headers,\n            method: \"POST\",\n        });\n    }\n\n    // Get newly listed tokens of any supported chains.\n    public async fetchTokenNewListing(\n        params?: NewListingParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<NewListingResponse>({\n            url: BIRDEYE_ENDPOINTS.token.new_listing,\n            params,\n            headers: options?.headers,\n        });\n    }\n\n    // Get top traders of given token.\n    public async fetchTokenTopTraders(\n        params: TopTradersParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TopTradersResponse>({\n            url: BIRDEYE_ENDPOINTS.token.top_traders,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // The API provides detailed information about the markets for a specific cryptocurrency token on a specified blockchain. Users can retrieve data for one or multiple markets related to a single token. This endpoint requires the specification of a token address and the blockchain to filter results. Additionally, it supports optional query parameters such as offset, limit, and required sorting by liquidity or sort type (ascending or descending) to refine the output.\n    public async fetchTokenAllMarketsList(\n        params: AllMarketsParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<AllMarketsResponse>({\n            url: BIRDEYE_ENDPOINTS.token.all_markets,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get metadata of single token\n    public async fetchTokenMetadataSingle(\n        params: TokenMetadataSingleParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenMetadataSingleResponse>({\n            url: BIRDEYE_ENDPOINTS.token.metadata_single,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get metadata of multiple tokens\n    public async fetchTokenMetadataMulti(\n        params: TokenMetadataMultiParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenMetadataMultiResponse>({\n            url: BIRDEYE_ENDPOINTS.token.metadata_multi,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get market data of single token\n    public async fetchTokenMarketData(\n        params: TokenMarketDataParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenMarketDataResponse>({\n            url: BIRDEYE_ENDPOINTS.token.market_data,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get trade data of single token\n    public async fetchTokenTradeDataSingle(\n        params: TokenTradeDataSingleParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenTradeDataSingleResponse>({\n            url: BIRDEYE_ENDPOINTS.token.trade_data_single,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get trade data of multiple tokens\n    public async fetchTokenTradeDataMultiple(\n        params: TokenTradeDataMultiParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenTradeDataMultiResponse>({\n            url: BIRDEYE_ENDPOINTS.token.trade_data_multi,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get top holder list of the given token\n    public async fetchTokenHolders(\n        params: TokenHoldersParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenHoldersResponse>({\n            url: BIRDEYE_ENDPOINTS.token.holders,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get mint/burn transaction list of the given token. Only support solana currently\n    public async fetchTokenMintBurn(\n        params: MintBurnParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<MintBurnResponse>({\n            url: BIRDEYE_ENDPOINTS.token.mint_burn,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    /*\n     * WALLET FETCH FUNCTIONS\n     */\n    public async fetchWalletSupportedNetworks(\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<DefiNetworksResponse>({\n            url: BIRDEYE_ENDPOINTS.defi.networks,\n            headers: options.headers,\n        });\n    }\n\n    public async fetchWalletPortfolio(\n        params: WalletPortfolioParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletPortfolioResponse>({\n            url: BIRDEYE_ENDPOINTS.wallet.portfolio,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    /**\n     * @deprecated This endpoint will be decommissioned on Feb 1st, 2025.\n     */\n    public async fetchWalletPortfolioMultichain(\n        params: WalletPortfolioMultichainParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletPortfolioMultichainResponse>({\n            url: BIRDEYE_ENDPOINTS.wallet.portfolio_multichain,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    public async fetchWalletTokenBalance(\n        params: WalletTokenBalanceParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletTokenBalanceResponse>({\n            url: BIRDEYE_ENDPOINTS.wallet.token_balance,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    public async fetchWalletTransactionHistory(\n        params: WalletTransactionHistoryParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletTransactionHistoryResponse>({\n            url: BIRDEYE_ENDPOINTS.wallet.transaction_history,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    /**\n     * @deprecated This endpoint will be decommissioned on Feb 1st, 2025.\n     */\n    public async fetchWalletTransactionHistoryMultichain(\n        params: WalletTransactionHistoryMultichainParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletTransactionHistoryMultichainResponse>(\n            {\n                url: BIRDEYE_ENDPOINTS.wallet.transaction_history_multichain,\n                params,\n                headers: options.headers,\n            }\n        );\n    }\n\n    public async fetchWalletTransactionSimulate_POST(\n        params: WalletSimulationParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<WalletSimulationResponse>({\n            url: BIRDEYE_ENDPOINTS.wallet.transaction_simulation_POST,\n            params,\n            headers: options.headers,\n            method: \"POST\",\n        });\n    }\n\n    /*\n     * TRADER FETCH FUNCTIONS\n     */\n\n    // The API provides detailed information top gainers/losers\n    public async fetchTraderGainersLosers(\n        params: GainersLosersParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<GainersLosersResponse>({\n            url: BIRDEYE_ENDPOINTS.trader.gainers_losers,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get list of trades of a trader with time bound option.\n    public async fetchTraderTransactionsSeek(\n        params: TraderTransactionsSeekParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TraderTransactionsSeekResponse>({\n            url: BIRDEYE_ENDPOINTS.trader.trades_seek,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    /*\n     * PAIR FETCH FUNCTIONS\n     */\n    public async fetchPairOverviewSingle(\n        params: PairOverviewSingleParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<PairOverviewSingleResponse>({\n            url: BIRDEYE_ENDPOINTS.pair.overview_single,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    // Get overview of multiple pairs\n    public async fetchMultiPairOverview(\n        params: PairOverviewMultiParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<PairOverviewMultiResponse>({\n            url: BIRDEYE_ENDPOINTS.pair.overview_multi,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    public async fetchPairOverviewMultiple(\n        params: PairOverviewMultiParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<PairOverviewMultiResponse>({\n            url: BIRDEYE_ENDPOINTS.pair.overview_multi,\n            params,\n            headers: options.headers,\n        });\n    }\n\n    /*\n     * SEARCH FETCH FUNCTIONS\n     */\n    public async fetchSearchTokenMarketData(\n        params: TokenMarketSearchParams,\n        options: { headers?: Record<string, string> } = {}\n    ) {\n        return this.fetchWithCacheAndRetry<TokenMarketSearchResponse>({\n            url: BIRDEYE_ENDPOINTS.search.token_market,\n            params,\n            headers: options.headers,\n        });\n    }\n}\n","export const DEFAULT_MAX_RETRIES = 3;\n\nexport const DEFAULT_SUPPORTED_SYMBOLS = {\n    SOL: \"So11111111111111111111111111111111111111112\",\n    BTC: \"qfnqNqs3nCAHjnyCgLRDbBtq4p2MtHZxw8YjSyYhPoL\",\n    ETH: \"7vfCXTUXx5WJV5JADk17DUJ4ksgau7utNKj4b963voxs\",\n    Example: \"2weMjPLLybRMMva1fM3U31goWWrCpF59CHWNhnCJ9Vyh\",\n};\n\nexport const API_BASE_URL = \"https://public-api.birdeye.so\";\n\nexport const RETRY_DELAY_MS = 2_000;\n\nexport const BIRDEYE_ENDPOINTS = {\n    defi: {\n        networks: \"/defi/networks\", // https://docs.birdeye.so/reference/get_defi-networks\n        price: \"/defi/price\", // https://docs.birdeye.so/reference/get_defi-price\n        price_multi: \"/defi/multi_price\", // https://docs.birdeye.so/reference/get_defi-multi-price\n        price_multi_POST: \"/defi/multi_price\", // https://docs.birdeye.so/reference/post_defi-multi-price\n        history_price: \"/defi/history_price\", // https://docs.birdeye.so/reference/get_defi-history-price\n        historical_price_unix: \"/defi/historical_price_unix\", // https://docs.birdeye.so/reference/get_defi-historical-price-unix\n        trades_token: \"/defi/txs/token\", // https://docs.birdeye.so/reference/get_defi-txs-token\n        trades_pair: \"/defi/txs/pair\", // https://docs.birdeye.so/reference/get_defi-txs-pair\n        trades_token_seek: \"/defi/txs/token/seek_by_time\", // https://docs.birdeye.so/reference/get_defi-txs-token-seek-by-time\n        trades_pair_seek: \"/defi/txs/pair/seek_by_time\", // https://docs.birdeye.so/reference/get_defi-txs-pair-seek-by-time\n        ohlcv: \"/defi/ohlcv\", // https://docs.birdeye.so/reference/get_defi-ohlcv\n        ohlcv_pair: \"/defi/ohlcv/pair\", // https://docs.birdeye.so/reference/get_defi-ohlcv-pair\n        ohlcv_base_quote: \"/defi/ohlcv/base_quote\", // https://docs.birdeye.so/reference/get_defi-ohlcv-base-quote\n        price_volume: \"/defi/price_volume/single\", // https://docs.birdeye.so/reference/get_defi-price-volume-single\n        price_volume_multi: \"/defi/price_volume/multi\", // https://docs.birdeye.so/reference/get_defi-price-volume-multi\n        price_volume_multi_POST: \"/defi/price_volume/multi\", // https://docs.birdeye.so/reference/post_defi-price-volume-multi\n    },\n    token: {\n        list_all: \"/defi/tokenlist\", // https://docs.birdeye.so/reference/get_defi-tokenlist\n        security: \"/defi/token_security\", // https://docs.birdeye.so/reference/get_defi-token-security\n        overview: \"/defi/token_overview\", // https://docs.birdeye.so/reference/get_defi-token-overview\n        creation_info: \"/defi/token_creation_info\", // https://docs.birdeye.so/reference/get_defi-token-creation-info\n        trending: \"/defi/token_trending\", // https://docs.birdeye.so/reference/get_defi-token-trending\n        list_all_v2_POST: \"/defi/v2/tokens/all\", // https://docs.birdeye.so/reference/post_defi-v2-tokens-all\n        new_listing: \"/defi/v2/tokens/new_listing\", // https://docs.birdeye.so/reference/get_defi-v2-tokens-new-listing\n        top_traders: \"/defi/v2/tokens/top_traders\", // https://docs.birdeye.so/reference/get_defi-v2-tokens-top-traders\n        all_markets: \"/defi/v2/markets\", // https://docs.birdeye.so/reference/get_defi-v2-markets\n        metadata_single: \"/defi/v3/token/meta-data/single\", // https://docs.birdeye.so/reference/get_defi-v3-token-meta-data-single\n        metadata_multi: \"/defi/v3/token/meta-data/multiple\", // https://docs.birdeye.so/reference/get_defi-v3-token-meta-data-multiple\n        market_data: \"/defi/v3/token/market-data\", // https://docs.birdeye.so/reference/get_defi-v3-token-market-data\n        trade_data_single: \"/defi/v3/token/trade-data/single\", // https://docs.birdeye.so/reference/get_defi-v3-token-trade-data-single\n        trade_data_multi: \"/defi/v3/token/trade-data/multiple\", // https://docs.birdeye.so/reference/get_defi-v3-token-trade-data-multiple\n        holders: \"/defi/v3/token/holder\", // https://docs.birdeye.so/reference/get_defi-v3-token-holder\n        mint_burn: \"/defi/v3/token/mint-burn-txs\", // https://docs.birdeye.so/reference/get_defi-v3-token-mint-burn-txs\n    },\n    wallet: {\n        networks: \"/v1/wallet/list_supported_chain\", // https://docs.birdeye.so/reference/get_v1-wallet-list-supported-chain\n        portfolio: \"/v1/wallet/token_list\", // https://docs.birdeye.so/reference/get_v1-wallet-token-list\n        portfolio_multichain: \"/v1/wallet/multichain_token_list\", // https://docs.birdeye.so/reference/get_v1-wallet-multichain-token-list\n        token_balance: \"/v1/wallet/token_balance\", // https://docs.birdeye.so/reference/get_v1-wallet-token-balance\n        transaction_history: \"/v1/wallet/tx_list\", // https://docs.birdeye.so/reference/get_v1-wallet-tx-list\n        transaction_history_multichain: \"/v1/wallet/multichain_tx_list\", // https://docs.birdeye.so/reference/get_v1-wallet-multichain-tx-list\n        transaction_simulation_POST: \"/v1/wallet/simulate\", // https://docs.birdeye.so/reference/post_v1-wallet-simulate\n    },\n    trader: {\n        gainers_losers: \"/trader/gainers-losers\", // https://docs.birdeye.so/reference/get_trader-gainers-losers\n        trades_seek: \"/trader/txs/seek_by_time\", // https://docs.birdeye.so/reference/get_trader-txs-seek-by-time\n    },\n    pair: {\n        overview_multi: \"/defi/v3/pair/overview/multiple\", // https://docs.birdeye.so/reference/get_defi-v3-pair-overview-multiple\n        overview_single: \"/defi/v3/pair/overview/single\", // https://docs.birdeye.so/reference/get_defi-v3-pair-overview-single\n    },\n    search: {\n        token_market: \"/defi/v3/search\", // https://docs.birdeye.so/reference/get_defi-v3-search\n    },\n};\n","import { elizaLogger } from \"@elizaos/core\";\nimport type { BirdeyeApiParams } from \"./types/api/common\";\nimport type { TokenMarketSearchResponse, TokenResult } from \"./types/api/search\";\nimport type { TokenMetadataSingleResponse } from \"./types/api/token\";\nimport type { WalletPortfolioResponse } from \"./types/api/wallet\";\nimport type { BaseAddress, BirdeyeSupportedChain } from \"./types/shared\";\n\n// Constants\nexport const BASE_URL = \"https://public-api.birdeye.so\";\n\nexport const BIRDEYE_SUPPORTED_CHAINS = [\n    \"solana\",\n    \"ethereum\",\n    \"arbitrum\",\n    \"avalanche\",\n    \"bsc\",\n    \"optimism\",\n    \"polygon\",\n    \"base\",\n    \"zksync\",\n    \"sui\",\n    \"solana\",\n    \"evm\", // EVM-compatible chains but we don't know the chain\n] as const;\n\n// Chain abbreviations and alternative names mapping\nexport const CHAIN_ALIASES: Record<string, BirdeyeSupportedChain> = {\n    // Solana\n    sol: \"solana\",\n\n    // Ethereum\n    eth: \"ethereum\",\n    ether: \"ethereum\",\n\n    // Arbitrum\n    arb: \"arbitrum\",\n    arbitrumone: \"arbitrum\",\n\n    // Avalanche\n    avax: \"avalanche\",\n\n    // BSC\n    bnb: \"bsc\",\n    binance: \"bsc\",\n    \"binance smart chain\": \"bsc\",\n\n    // Optimism\n    op: \"optimism\",\n    opti: \"optimism\",\n\n    // Polygon\n    matic: \"polygon\",\n    poly: \"polygon\",\n\n    // Base\n    // no common abbreviations\n\n    // zkSync\n    zks: \"zksync\",\n    zk: \"zksync\",\n\n    // Sui\n    // no common abbreviations\n} as const;\n\nexport class BirdeyeApiError extends Error {\n    constructor(\n        public status: number,\n        message: string\n    ) {\n        super(message);\n        this.name = \"BirdeyeApiError\";\n    }\n}\n\nexport interface ApiResponse<T> {\n    success: boolean;\n    data: T;\n    error?: string;\n}\n\n// Time-related types and constants\nexport const TIME_UNITS = {\n    second: 1,\n    minute: 60,\n    hour: 3600,\n    day: 86400,\n    week: 604800,\n    month: 2592000,\n} as const;\n\nexport const TIMEFRAME_KEYWORDS = {\n    \"1m\": 60,\n    \"3m\": 180,\n    \"5m\": 300,\n    \"15m\": 900,\n    \"30m\": 1800,\n    \"1h\": 3600,\n    \"2h\": 7200,\n    \"4h\": 14400,\n    \"6h\": 21600,\n    \"12h\": 43200,\n    \"1d\": 86400,\n    \"1w\": 604800,\n} as const;\n\nexport type TimeUnit = keyof typeof TIME_UNITS;\nexport type Timeframe = keyof typeof TIMEFRAME_KEYWORDS;\n\n// Helper functions\nexport const extractChain = (text: string): BirdeyeSupportedChain => {\n    // Check for SUI address (0x followed by 64 hex chars)\n    if (text.match(/0x[a-fA-F0-9]{64}/)) {\n        return \"sui\";\n    }\n    // Check for EVM address (0x followed by 40 hex chars)\n    if (text.match(/0x[a-fA-F0-9]{40}/)) {\n        return \"ethereum\";\n    }\n    // Default to solana\n    return \"solana\";\n};\n\nexport const extractAddresses = (text: string): BaseAddress[] => {\n    const addresses: BaseAddress[] = [];\n\n    // EVM-compatible chains (Ethereum, Arbitrum, Avalanche, BSC, Optimism, Polygon, Base, zkSync)\n    const evmAddresses = text.match(/0x[a-fA-F0-9]{40}/g);\n    if (evmAddresses) {\n        addresses.push(\n            ...evmAddresses.map((address) => ({\n                address,\n                chain: \"evm\" as BirdeyeSupportedChain, // we don't yet know the chain but can assume it's EVM-compatible\n            }))\n        );\n    }\n\n    // Solana addresses (base58 strings)\n    const solAddresses = text.match(/[1-9A-HJ-NP-Za-km-z]{32,44}/g);\n    if (solAddresses) {\n        addresses.push(\n            ...solAddresses.map((address) => ({\n                address,\n                chain: \"solana\" as BirdeyeSupportedChain,\n            }))\n        );\n    }\n\n    // Sui addresses (0x followed by 64 hex chars)\n    const suiAddresses = text.match(/0x[a-fA-F0-9]{64}/g);\n    if (suiAddresses) {\n        addresses.push(\n            ...suiAddresses.map((address) => ({\n                address,\n                chain: \"sui\" as BirdeyeSupportedChain,\n            }))\n        );\n    }\n\n    return addresses;\n};\n\n// Time extraction and analysis\nexport const extractTimeframe = (text: string): Timeframe => {\n    // First, check for explicit timeframe mentions\n    const timeframe = Object.keys(TIMEFRAME_KEYWORDS).find((tf) =>\n        text.toLowerCase().includes(tf.toLowerCase())\n    );\n    if (timeframe) return timeframe as Timeframe;\n\n    // Check for semantic timeframe hints\n    const semanticMap = {\n        \"short term\": \"15m\",\n        \"medium term\": \"1h\",\n        \"long term\": \"1d\",\n        intraday: \"1h\",\n        daily: \"1d\",\n        weekly: \"1w\",\n        detailed: \"5m\",\n        quick: \"15m\",\n        overview: \"1d\",\n    } as const;\n\n    for (const [hint, tf] of Object.entries(semanticMap)) {\n        if (text.toLowerCase().includes(hint)) {\n            return tf as Timeframe;\n        }\n    }\n\n    // Analyze for time-related words\n    if (text.match(/minute|min|minutes/i)) return \"15m\";\n    if (text.match(/hour|hourly|hours/i)) return \"1h\";\n    if (text.match(/day|daily|24h/i)) return \"1d\";\n    if (text.match(/week|weekly/i)) return \"1w\";\n\n    // Default based on context\n    if (text.match(/trade|trades|trading|recent/i)) return \"15m\";\n    if (text.match(/trend|analysis|analyze/i)) return \"1h\";\n    if (text.match(/history|historical|long|performance/i)) return \"1d\";\n\n    return \"1h\"; // Default timeframe\n};\n\nexport const extractTimeRange = (\n    text: string\n): { start: number; end: number } => {\n    const now = Math.floor(Date.now() / 1000);\n\n    // Check for specific date ranges\n    const dateRangeMatch = text.match(\n        /from\\s+(\\d{4}-\\d{2}-\\d{2})\\s+to\\s+(\\d{4}-\\d{2}-\\d{2})/i\n    );\n    if (dateRangeMatch) {\n        const start = new Date(dateRangeMatch[1]).getTime() / 1000;\n        const end = new Date(dateRangeMatch[2]).getTime() / 1000;\n        return { start, end };\n    }\n\n    // Check for relative time expressions\n    const timeRegex = /(\\d+)\\s*(second|minute|hour|day|week|month)s?\\s*ago/i;\n    const match = text.match(timeRegex);\n    if (match) {\n        const amount = Number.parseInt(match[1]);\n        const unit = match[2].toLowerCase() as TimeUnit;\n        const start = now - amount * TIME_UNITS[unit];\n        return { start, end: now };\n    }\n\n    // Check for semantic time ranges\n    const semanticRanges: Record<string, number> = {\n        today: TIME_UNITS.day,\n        \"this week\": TIME_UNITS.week,\n        \"this month\": TIME_UNITS.month,\n        recent: TIME_UNITS.hour * 4,\n        latest: TIME_UNITS.hour,\n        \"last hour\": TIME_UNITS.hour,\n        \"last day\": TIME_UNITS.day,\n        \"last week\": TIME_UNITS.week,\n        \"last month\": TIME_UNITS.month,\n    };\n\n    for (const [range, duration] of Object.entries(semanticRanges)) {\n        if (text.toLowerCase().includes(range)) {\n            return { start: now - duration, end: now };\n        }\n    }\n\n    // Analyze context for appropriate default range\n    if (text.match(/trend|analysis|performance/i)) {\n        return { start: now - TIME_UNITS.week, end: now }; // 1 week for analysis\n    }\n    if (text.match(/trade|trades|trading|recent/i)) {\n        return { start: now - TIME_UNITS.day, end: now }; // 1 day for trading\n    }\n    if (text.match(/history|historical|long term/i)) {\n        return { start: now - TIME_UNITS.month, end: now }; // 1 month for history\n    }\n\n    // Default to last 24 hours\n    return { start: now - TIME_UNITS.day, end: now };\n};\n\nexport const extractLimit = (text: string): number => {\n    // Check for explicit limit mentions\n    const limitMatch = text.match(\n        /\\b(show|display|get|fetch|limit)\\s+(\\d+)\\b/i\n    );\n    if (limitMatch) {\n        const limit = Number.parseInt(limitMatch[2]);\n        return Math.min(Math.max(limit, 1), 100); // Clamp between 1 and 100\n    }\n\n    // Check for semantic limit hints\n    if (text.match(/\\b(all|everything|full|complete)\\b/i)) return 100;\n    if (text.match(/\\b(brief|quick|summary|overview)\\b/i)) return 5;\n    if (text.match(/\\b(detailed|comprehensive)\\b/i)) return 50;\n\n    // Default based on context\n    if (text.match(/\\b(trade|trades|trading)\\b/i)) return 10;\n    if (text.match(/\\b(analysis|analyze|trend)\\b/i)) return 24;\n    if (text.match(/\\b(history|historical)\\b/i)) return 50;\n\n    return 10; // Default limit\n};\n\n// Formatting helpers\nexport const formatValue = (value?: number): string => {\n    if (!value) return \"N/A\";\n    if (value && value >= 1_000_000_000) {\n        return `$${(value / 1_000_000_000).toFixed(2)}B`;\n    }\n    if (value >= 1_000_000) {\n        return `$${(value / 1_000_000).toFixed(2)}M`;\n    }\n    if (value >= 1_000) {\n        return `$${(value / 1_000).toFixed(2)}K`;\n    }\n    return `$${value.toFixed(2)}`;\n};\n\nexport const formatPercentChange = (change?: number): string => {\n    if (change === undefined) return \"N/A\";\n    const symbol = change >= 0 ? \"‚Üë\" : \"‚Üì\";\n    return `${symbol} ${Math.abs(change).toFixed(2)}%`;\n};\n\nexport const shortenAddress = (address?: string): string => {\n    if (!address || address.length <= 12) return address || \"Unknown\";\n    return `${address.slice(0, 6)}...${address.slice(-4)}`;\n};\n\nexport const formatTimestamp = (timestamp?: number): string => {\n    return timestamp ? new Date(timestamp * 1000).toLocaleString() : \"N/A\";\n};\n\nexport const formatPrice = (price?: number): string => {\n    return price\n        ? price < 0.01\n            ? price.toExponential(2)\n            : price.toFixed(2)\n        : \"N/A\";\n};\n\n// API helpers\nexport async function makeApiRequest<T>(\n    url: string,\n    options: {\n        apiKey: string;\n        chain?: BirdeyeSupportedChain;\n        method?: \"GET\" | \"POST\";\n        body?: any;\n    }\n): Promise<T> {\n    const { apiKey, chain = \"solana\", method = \"GET\", body } = options;\n\n    try {\n        const response = await fetch(url, {\n            method,\n            headers: {\n                \"X-API-KEY\": apiKey,\n                \"x-chain\": chain,\n                ...(body && { \"Content-Type\": \"application/json\" }),\n            },\n            ...(body && { body: JSON.stringify(body) }),\n        });\n\n        if (!response.ok) {\n            if (response.status === 404) {\n                throw new BirdeyeApiError(404, \"Resource not found\");\n            }\n            if (response.status === 429) {\n                throw new BirdeyeApiError(429, \"Rate limit exceeded\");\n            }\n            throw new BirdeyeApiError(\n                response.status,\n                `HTTP error! status: ${response.status}`\n            );\n        }\n\n        const responseJson: T = await response.json();\n\n        return responseJson;\n    } catch (error) {\n        if (error instanceof BirdeyeApiError) {\n            elizaLogger.error(`API Error (${error.status}):`, error.message);\n        } else {\n            elizaLogger.error(\"Error making API request:\", error);\n        }\n        throw error;\n    }\n}\n\n// Formatting helpers\nexport const formatTokenInfo = (\n    token: TokenResult,\n    metadata?: TokenMetadataSingleResponse\n): string => {\n    const priceFormatted =\n        token.price != null\n            ? token.price < 0.01\n                ? token.price.toExponential(2)\n                : token.price.toFixed(2)\n            : \"N/A\";\n\n    const volume =\n        token.volume_24h_usd != null\n            ? `$${(token.volume_24h_usd / 1_000_000).toFixed(2)}M`\n            : \"N/A\";\n\n    const liquidity =\n        token.liquidity != null\n            ? `$${(token.liquidity / 1_000_000).toFixed(2)}M`\n            : \"N/A\";\n\n    const fdv =\n        token.fdv != null ? `$${(token.fdv / 1_000_000).toFixed(2)}M` : \"N/A\";\n\n    const priceChange =\n        token.price_change_24h_percent != null\n            ? `${token.price_change_24h_percent > 0 ? \"+\" : \"\"}${token.price_change_24h_percent.toFixed(2)}%`\n            : \"N/A\";\n\n    const trades = token.trade_24h != null ? token.trade_24h.toString() : \"N/A\";\n\n    const age = token.creation_time\n        ? `${Math.floor((Date.now() - new Date(token.creation_time).getTime()) / (1000 * 60 * 60 * 24))}d`\n        : \"N/A\";\n\n    let output =\n        `ü™ô ${token.name} @ ${token.symbol}\\n` +\n        `üí∞ USD: $${priceFormatted} (${priceChange})\\n` +\n        `üíé FDV: ${fdv}\\n` +\n        `üí¶ MCap: ${token.market_cap ? `$${(token.market_cap / 1_000_000).toFixed(2)}M` : \"N/A\"}\\n` +\n        `üí¶ Liq: ${liquidity}\\n` +\n        `üìä Vol: ${volume}\\n` +\n        `üï∞Ô∏è Age: ${age}\\n` +\n        `üîÑ Trades: ${trades}\\n` +\n        `üîó Address: ${token.address}`;\n\n    // Add metadata if available\n    if (metadata?.success) {\n        const { extensions } = metadata.data;\n        const links: string[] = [];\n\n        if (extensions.website)\n            links.push(`üåê [Website](${extensions.website})`);\n        if (extensions.twitter)\n            links.push(`üê¶ [Twitter](${extensions.twitter})`);\n        if (extensions.discord)\n            links.push(`üí¨ [Discord](${extensions.discord})`);\n        if (extensions.medium) links.push(`üìù [Medium](${extensions.medium})`);\n        if (extensions.coingecko_id)\n            links.push(\n                `ü¶é [CoinGecko](https://www.coingecko.com/en/coins/${extensions.coingecko_id})`\n            );\n\n        if (links.length > 0) {\n            output += \"\\n\\nüì± Social Links:\\n\" + links.join(\"\\n\");\n        }\n    }\n\n    return output;\n};\n\n// Extract symbols from text\nexport const extractSymbols = (\n    text: string,\n    // loose mode will try to extract more symbols but may include false positives\n    // strict mode will only extract symbols that are clearly formatted as a symbol using $SOL format\n    mode: \"strict\" | \"loose\" = \"loose\"\n): string[] => {\n    const symbols = new Set<string>();\n\n    // Match patterns - this may\n    const patterns =\n        mode === \"strict\"\n            ? [\n                  // $SYMBOL format\n                  /\\$([A-Z0-9]{2,10})\\b/gi,\n                  // $SYMBOL format with lowercase\n                  /\\$([a-z0-9]{2,10})\\b/gi,\n              ]\n            : [\n                  // $SYMBOL format\n                  /\\$([A-Z0-9]{2,10})\\b/gi,\n                  // After articles (a/an)\n                  /\\b(?:a|an)\\s+([A-Z0-9]{2,10})\\b/gi,\n                  // // Standalone caps\n                  /\\b[A-Z0-9]{2,10}\\b/g,\n                  // // Quoted symbols\n                  /[\"']([A-Z0-9]{2,10})[\"']/gi,\n                  // // Common price patterns\n                  /\\b([A-Z0-9]{2,10})\\/USD\\b/gi,\n                  /\\b([A-Z0-9]{2,10})-USD\\b/gi,\n              ];\n\n    // Extract all matches\n    patterns.forEach((pattern) => {\n        const matches = text.matchAll(pattern);\n        for (const match of matches) {\n            const symbol = (match[1] || match[0]).toUpperCase();\n            symbols.add(symbol);\n        }\n    });\n\n    return Array.from(symbols);\n};\n\nexport const formatMetadataResponse = (\n    data: TokenMetadataSingleResponse,\n    chain: BirdeyeSupportedChain\n): string => {\n    const tokenData = data.data;\n    const chainName = chain.charAt(0).toUpperCase() + chain.slice(1);\n    const chainExplorer = (() => {\n        switch (chain) {\n            case \"solana\":\n                return `https://solscan.io/token/${tokenData.address}`;\n            case \"ethereum\":\n                return `https://etherscan.io/token/${tokenData.address}`;\n            case \"arbitrum\":\n                return `https://arbiscan.io/token/${tokenData.address}`;\n            case \"avalanche\":\n                return `https://snowtrace.io/token/${tokenData.address}`;\n            case \"bsc\":\n                return `https://bscscan.com/token/${tokenData.address}`;\n            case \"optimism\":\n                return `https://optimistic.etherscan.io/token/${tokenData.address}`;\n            case \"polygon\":\n                return `https://polygonscan.com/token/${tokenData.address}`;\n            case \"base\":\n                return `https://basescan.org/token/${tokenData.address}`;\n            case \"zksync\":\n                return `https://explorer.zksync.io/address/${tokenData.address}`;\n            case \"sui\":\n                return `https://suiscan.xyz/mainnet/object/${tokenData.address}`;\n            default:\n                return null;\n        }\n    })();\n\n    let response = `Token Metadata for ${tokenData.name} (${tokenData.symbol}) on ${chainName}\\n\\n`;\n\n    // Basic Information\n    response += \"üìù Basic Information\\n\";\n    response += `‚Ä¢ Name: ${tokenData.name}\\n`;\n    response += `‚Ä¢ Symbol: ${tokenData.symbol}\\n`;\n    response += `‚Ä¢ Address: ${tokenData.address}\\n`;\n    response += `‚Ä¢ Decimals: ${tokenData.decimals}\\n`;\n    if (chainExplorer) {\n        response += `‚Ä¢ Explorer: [View on ${chainName} Explorer](${chainExplorer})\\n`;\n    }\n\n    // Social Links\n    response += \"\\nüîó Social Links & Extensions\\n\";\n    response += formatSocialLinks(tokenData) + \"\\n\";\n\n    // Logo\n    if (tokenData.logo_uri) {\n        response += \"\\nüñºÔ∏è Logo\\n\";\n        response += tokenData.logo_uri;\n    }\n\n    return response;\n};\n\nconst formatSocialLinks = (\n    data: TokenMetadataSingleResponse[\"data\"]\n): string => {\n    const links: string[] = [];\n    const { extensions } = data;\n\n    if (!extensions) {\n        return \"No social links available\";\n    }\n\n    if (extensions.website) {\n        links.push(`üåê [Website](${extensions.website})`);\n    }\n    if (extensions.twitter) {\n        links.push(`üê¶ [Twitter](${extensions.twitter})`);\n    }\n    if (extensions.discord) {\n        links.push(`üí¨ [Discord](${extensions.discord})`);\n    }\n    if (extensions.medium) {\n        links.push(`üìù [Medium](${extensions.medium})`);\n    }\n    if (extensions.coingecko_id) {\n        links.push(\n            `ü¶é [CoinGecko](https://www.coingecko.com/en/coins/${extensions.coingecko_id})`\n        );\n    }\n\n    return links.length > 0 ? links.join(\"\\n\") : \"No social links available\";\n};\n\nexport const waitFor = (ms: number) =>\n    new Promise((resolve) => setTimeout(resolve, ms));\n\nexport const formatPortfolio = (response: WalletPortfolioResponse) => {\n    const { items } = response.data;\n    if (!items?.length) return \"No tokens found in portfolio\";\n\n    return items\n        .map((item) => {\n            const value = item?.priceUsd?.toFixed(2);\n            const amount = item?.uiAmount?.toFixed(4);\n            return (\n                `‚Ä¢ ${item.symbol || \"Unknown Token\"}: ${amount} tokens` +\n                `${value !== \"0.00\" ? ` (Value: $${value || \"unknown\"})` : \"\"}`\n            );\n        })\n        .join(\"\\n\");\n};\n\nexport const convertToStringParams = (params: BirdeyeApiParams) => {\n    return Object.entries(params || {}).reduce(\n        (acc, [key, value]) => ({\n            ...acc,\n            [key]: value?.toString() || \"\",\n        }),\n        {} as Record<string, string>\n    );\n};\n\nexport const getTokenResultFromSearchResponse = (\n    response: TokenMarketSearchResponse\n): TokenResult[] | undefined => {\n    return response.data.items\n        .filter((item) => item.type === \"token\")\n        .flatMap((item) => item.result);\n};\n","import {\n    type Action,\n    type ActionExample,\n    elizaLogger,\n    type HandlerCallback,\n    type IAgentRuntime,\n    type Memory,\n    type State,\n} from \"@elizaos/core\";\nimport { BirdeyeProvider } from \"../birdeye\";\nimport type { TokenResult } from \"../types/api/search\";\nimport {\n    extractSymbols,\n    formatPercentChange,\n    formatPrice,\n    formatValue,\n} from \"../utils\";\n\n// \"strict\" requires a $ prefix and will match $SOL, $ai16z, $BTC, etc.\n// \"loose\" will match $SOL, SOL, SOLANA, etc. and does not require a $ prefix but may interpret any other acronyms as symbols to search for\nconst SYMBOL_SEARCH_MODE = \"strict\";\n\nexport const tokenSearchSymbolAction = {\n    name: \"TOKEN_SEARCH_SYMBOL\",\n    similes: [\n        \"SEARCH_TOKEN_SYMBOL\",\n        \"FIND_TOKEN_SYMBOL\",\n        \"LOOKUP_TOKEN_SYMBOL\",\n        \"CHECK_TOKEN_SYMBOL\",\n        \"GET_TOKEN_BY_SYMBOL\",\n        \"SYMBOL_SEARCH\",\n        \"SYMBOL_LOOKUP\",\n        \"SYMBOL_CHECK\",\n        \"TOKEN_SYMBOL_INFO\",\n        \"TOKEN_SYMBOL_DETAILS\",\n        \"TOKEN_SYMBOL_LOOKUP\",\n        \"TOKEN_SYMBOL_SEARCH\",\n        \"TOKEN_SYMBOL_CHECK\",\n        \"TOKEN_SYMBOL_QUERY\",\n        \"TOKEN_SYMBOL_FIND\",\n        \"GET_TOKEN_INFO\",\n        \"TOKEN_INFO\",\n        \"TOKEN_REPORT\",\n        \"TOKEN_ANALYSIS\",\n        \"TOKEN_OVERVIEW\",\n        \"TOKEN_SUMMARY\",\n        \"TOKEN_INSIGHT\",\n        \"TOKEN_DATA\",\n        \"TOKEN_STATS\",\n        \"TOKEN_METRICS\",\n        \"TOKEN_PROFILE\",\n        \"TOKEN_REVIEW\",\n        \"TOKEN_CHECK\",\n        \"TOKEN_LOOKUP\",\n        \"TOKEN_FIND\",\n        \"TOKEN_DISCOVER\",\n        \"TOKEN_EXPLORE\",\n    ],\n    description:\n        \"Search for detailed token information including security and trade data by symbol\",\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        _state: State,\n        _options: Record<string, unknown>,\n        callback?: HandlerCallback\n    ) => {\n        try {\n            const provider = new BirdeyeProvider(runtime.cacheManager);\n\n            // get all symbols from the message that match (i.e. $SOL, $ETH, $BTC, etc.). If you want to match more loosely, use \"loose\" instead of \"strict\" and it will match $SOL, SOL, SOLANA, etc.\n            const symbols = extractSymbols(\n                message.content.text,\n                SYMBOL_SEARCH_MODE\n            );\n\n            elizaLogger.info(\n                `Searching Birdeye provider for ${symbols.length} symbols`\n            );\n\n            // for each symbol, do a search in Birdeye. This will return a list of token results that may be amatch to the token symbol.\n            const results = await Promise.all(\n                symbols.map((symbol) =>\n                    provider.fetchSearchTokenMarketData({\n                        keyword: symbol,\n                        sort_by: \"volume_24h_usd\",\n                        sort_type: \"desc\",\n                        chain: \"all\",\n                        limit: 5,\n                    })\n                )\n            );\n\n            // get filter the results to only include the token results and then filter the results to only include the ones that match the symbol\n            const validResults = results.map((r, i) =>\n                r.data.items\n                    .filter((item) => item.type === \"token\" && item.result)\n                    .flatMap((item) =>\n                        (item.result as TokenResult[]).filter(\n                            (r) =>\n                                r.symbol?.toLowerCase() ===\n                                symbols[i].toLowerCase()\n                        )\n                    )\n            ) as TokenResult[][];\n\n            if (validResults.length === 0) {\n                return true;\n            }\n\n            const completeResults = `I performed a search for the token symbols you requested and found the following results (for more details search by contract address):\\n\\n${validResults\n                .map(\n                    (result, i) =>\n                        `${formatTokenSummary(symbols[i], i, result)}`\n                )\n                .join(\"\\n\")}`;\n\n            callback?.({ text: completeResults });\n            return true;\n        } catch (error) {\n            console.error(\"Error in searchTokens handler:\", error.message);\n            callback?.({ text: `Error: ${error.message}` });\n            return false;\n        }\n    },\n    validate: async (_runtime: IAgentRuntime, message: Memory) => {\n        const symbols = extractSymbols(\n            message.content.text,\n            SYMBOL_SEARCH_MODE\n        );\n        return symbols.length > 0;\n    },\n    examples: [\n        [\n            {\n                user: \"user\",\n                content: {\n                    text: \"Search for $SOL and $ETH\",\n                    action: \"SEARCH_TOKENS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Find information about $BTC\",\n                    action: \"TOKEN_SEARCH\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Look up $WETH token\",\n                    action: \"LOOKUP_TOKENS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Tell me about SOL\",\n                    action: \"CHECK_TOKEN\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Give me details on $ADA\",\n                    action: \"TOKEN_DETAILS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"What can you tell me about $DOGE?\",\n                    action: \"TOKEN_INFO\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"I need a report on $XRP\",\n                    action: \"TOKEN_REPORT\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Analyze $BNB for me\",\n                    action: \"TOKEN_ANALYSIS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Overview of $LTC\",\n                    action: \"TOKEN_OVERVIEW\",\n                },\n            },\n        ],\n    ] as ActionExample[][],\n} as Action;\n\nconst formatTokenSummary = (\n    symbol: string,\n    _index: number,\n    tokens: TokenResult[]\n) => {\n    return tokens\n        .map((token, i) => {\n            let output = \"\";\n            if (i === 0) {\n                output += `Search Results for ${symbol}:\\n\\n`;\n            }\n            output += `Search Result #${tokens.length > 0 ? i + 1 : \"\"}:\\n`;\n            output += `üîñ Symbol: $${token.symbol.toUpperCase()}\\n`;\n            output += `üîó Address: ${token.address}\\n`;\n            output += `üåê Network: ${token.network.toUpperCase()}\\n`;\n            output += `üíµ Price: ${formatPrice(token.price)} (${formatPercentChange(token.price_change_24h_percent)})\\n`;\n            output += `üí∏ Volume (24h USD): ${formatValue(token.volume_24h_usd)}\\n`;\n            output += token.market_cap\n                ? `üí∞ Market Cap: ${formatValue(token.market_cap)}\\n`\n                : \"\";\n            output += token.fdv ? `üåä FDV: ${formatValue(token.fdv)}\\n` : \"\";\n            return output;\n        })\n        .join(\"\\n\");\n};\n","import {\n    type Action,\n    type ActionExample,\n    elizaLogger,\n    type HandlerCallback,\n    type IAgentRuntime,\n    type Memory,\n    type State,\n} from \"@elizaos/core\";\nimport { BirdeyeProvider } from \"../birdeye\";\nimport type { WalletPortfolioResponse } from \"../types/api/wallet\";\nimport type { BaseAddress } from \"../types/shared\";\nimport { extractAddresses } from \"../utils\";\n\nexport const walletSearchAddressAction = {\n    name: \"WALLET_SEARCH_ADDRESS\",\n    similes: [\n        \"SEARCH_WALLET_ADDRESS\",\n        \"FIND_WALLET_ADDRESS\",\n        \"LOOKUP_WALLET_ADDRESS\",\n        \"CHECK_WALLET_ADDRESS\",\n        \"GET_WALLET_BY_ADDRESS\",\n        \"WALLET_ADDRESS_INFO\",\n        \"WALLET_ADDRESS_LOOKUP\",\n        \"WALLET_ADDRESS_SEARCH\",\n        \"WALLET_ADDRESS_CHECK\",\n        \"WALLET_ADDRESS_DETAILS\",\n        \"WALLET_CONTRACT_SEARCH\",\n        \"WALLET_CONTRACT_LOOKUP\",\n        \"WALLET_CONTRACT_INFO\",\n        \"WALLET_CONTRACT_CHECK\",\n        \"VERIFY_WALLET_ADDRESS\",\n        \"VALIDATE_WALLET_ADDRESS\",\n        \"GET_WALLET_INFO\",\n        \"WALLET_INFO\",\n        \"WALLET_REPORT\",\n        \"WALLET_ANALYSIS\",\n        \"WALLET_OVERVIEW\",\n        \"WALLET_SUMMARY\",\n        \"WALLET_INSIGHT\",\n        \"WALLET_DATA\",\n        \"WALLET_STATS\",\n        \"WALLET_METRICS\",\n        \"WALLET_PROFILE\",\n        \"WALLET_REVIEW\",\n        \"WALLET_CHECK\",\n        \"WALLET_LOOKUP\",\n        \"WALLET_FIND\",\n        \"WALLET_DISCOVER\",\n        \"WALLET_EXPLORE\",\n    ],\n    description:\n        \"Search for detailed wallet information including portfolio and transaction data by address\",\n    handler: async (\n        runtime: IAgentRuntime,\n        message: Memory,\n        _state: State,\n        _options: Record<string, unknown>,\n        callback?: HandlerCallback\n    ) => {\n        try {\n            const provider = new BirdeyeProvider(runtime.cacheManager);\n\n            // get all wallet addresses from the message\n            const addresses = extractAddresses(message.content.text);\n\n            elizaLogger.info(\n                `Searching Birdeye provider for ${addresses.length} addresses`\n            );\n\n            // for each symbol, do a search in Birdeye. This will return a list of token results that may be amatch to the token symbol.\n            const results: WalletPortfolioResponse[] = await Promise.all(\n                addresses.map(async ({ address, chain: addressChain }) => {\n                    // address detection can't distinguish between evm chains, so we currently only do address search on ETH for EVM addresses. Future support will be added for other chains if the user requests it.\n                    const chain =\n                        addressChain === \"evm\" ? \"ethereum\" : addressChain;\n                    return provider.fetchWalletPortfolio(\n                        {\n                            wallet: address,\n                        },\n                        {\n                            headers: {\n                                chain: chain,\n                            },\n                        }\n                    );\n                })\n            );\n\n            console.log(results);\n\n            const completeResults = `I performed a search for the wallet addresses you requested and found the following results:\\n\\n${results\n                .map(\n                    (result, i) =>\n                        `${formatWalletReport(addresses[i], results.length, i, result)}`\n                )\n                .join(\"\\n\\n\")}`;\n\n            callback?.({ text: completeResults });\n            return true;\n        } catch (error) {\n            console.error(\"Error in searchTokens handler:\", error.message);\n            callback?.({ text: `Error: ${error.message}` });\n            return false;\n        }\n    },\n    validate: async (_runtime: IAgentRuntime, message: Memory) => {\n        const addresses = extractAddresses(message.content.text);\n        return addresses.length > 0;\n    },\n    examples: [\n        [\n            {\n                user: \"user\",\n                content: {\n                    text: \"Search wallet 0x1234567890abcdef1234567890abcdef12345678\",\n                    action: \"WALLET_SEARCH_ADDRESS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Look up wallet address HN7cABqLq46Es1jh92dQQisAq662SmxELLLsHHe4YWrH\",\n                    action: \"WALLET_ADDRESS_LOOKUP\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Check this address: 0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045\",\n                    action: \"CHECK_WALLET_ADDRESS\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Get wallet info for 5yBYpGQRHPz4i5FkVnP9h9VTJBMnwgHRe5L5gw2bwp9q\",\n                    action: \"WALLET_INFO\",\n                },\n            },\n            {\n                user: \"user\",\n                content: {\n                    text: \"Show me portfolio for 0x3cD751E6b0078Be393132286c442345e5DC49699\",\n                    action: \"WALLET_OVERVIEW\",\n                },\n            },\n        ],\n    ] as ActionExample[][],\n} as Action;\n\n// take all the details of the results and present to the user\nconst formatWalletReport = (\n    address: BaseAddress,\n    totalResults: number,\n    index: number,\n    result: WalletPortfolioResponse\n) => {\n    const tokens = result.data.items.slice(0, 10) || [];\n    const totalValue = tokens.reduce(\n        (sum, token) => sum + (token.valueUsd || 0),\n        0\n    );\n\n    let header = `Wallet Result ${totalResults > 1 ? `#${index + 1}` : \"\"}\\n`;\n    header += `üëõ Address ${address.address}*\\n`;\n    header += `üí∞ Total Value: $${totalValue.toLocaleString()}\\n`;\n    header += \"üîñ Top Holdings:\";\n    const tokenList = tokens\n        .map(\n            (token) =>\n                `‚Ä¢ $${token.symbol.toUpperCase()}: $${token.valueUsd?.toLocaleString()} (${token.uiAmount?.toFixed(4)} tokens)`\n        )\n        .join(\"\\n\");\n\n    return `${header}\\n${tokenList}`;\n};\n","import type { IAgentRuntime, Memory, Provider, State } from \"@elizaos/core\";\nimport { BirdeyeProvider } from \"../birdeye\";\nimport { extractChain, formatPortfolio } from \"../utils\";\n\n/**\n * Agent portfolio data provider that queries Birdeye API for the agent's wallet address.\n * When a wallet address is set, this provider fetches portfolio data to give the agent\n * context about the agent's holdings when responding to queries.\n *\n * The provider:\n * - Validates the agent's wallet address\n * - Fetches current portfolio data from Birdeye including token balances and metadata\n * - Makes this portfolio context available to the agent for responding to user queries\n * about their holdings, token values, etc.\n */\nexport const agentPortfolioProvider: Provider = {\n    get: async (\n        runtime: IAgentRuntime,\n        _message: Memory,\n        _state?: State\n    ): Promise<string> => {\n        try {\n            const provider = new BirdeyeProvider(runtime.cacheManager);\n            const walletAddr = runtime.getSetting(\"BIRDEYE_WALLET_ADDR\");\n\n            if (!walletAddr) {\n                console.warn(\"No Birdeye wallet was specified\");\n                return \"\";\n            }\n\n            const chain = extractChain(walletAddr);\n\n            const resp = await provider.fetchWalletPortfolio(\n                {\n                    wallet: walletAddr,\n                },\n                {\n                    headers: {\n                        chain,\n                    },\n                }\n            );\n\n            const portfolioText = formatPortfolio(resp);\n\n            return `This is your wallet address: ${walletAddr}\\n\\nThis is your portfolio: [${portfolioText}]`;\n        } catch (error) {\n            console.error(\"Error fetching token data:\", error);\n            return \"Unable to fetch token information. Please try again later.\";\n        }\n    },\n};\n","import type { Plugin } from \"@elizaos/core\";\nimport { tokenSearchAddressAction } from \"./actions/token-search-address\";\nimport { tokenSearchSymbolAction } from \"./actions/token-search-symbol\";\nimport { walletSearchAddressAction } from \"./actions/wallet-search-address\";\nimport { agentPortfolioProvider } from \"./providers/agent-portfolio-provider\";\n\nexport const birdeyePlugin: Plugin = {\n    name: \"birdeye\",\n    description: \"Birdeye Plugin for token data and analytics\",\n    actions: [\n        tokenSearchSymbolAction,\n        tokenSearchAddressAction,\n        walletSearchAddressAction,\n        // testAllEndpointsAction, // this action can be used to optionally test all endpoints\n    ],\n    evaluators: [],\n    providers: [agentPortfolioProvider],\n};\n\nexport default birdeyePlugin;\n"],"mappings":"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","names":["elizaLogger","elizaLogger","elizaLogger","elizaLogger","elizaLogger","elizaLogger","r","elizaLogger","elizaLogger"]}